<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="../../../css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="../../../css/ui-box.css">
        <link rel="stylesheet" href="../../../css/ui-base.css">
        <link rel="stylesheet" href="../../../css/ui-color.css">
        <link rel="stylesheet" href="../../../css/appcan.icon.css">
        <link rel="stylesheet" href="../../../css/appcan.control.css">
        <link rel="stylesheet" href="../../../css/my.css">
    </head>
    <body class="um-vp bc-bg" ontouchstart>
        <div id="dot">
            <img src="../../../css/res/common/btn-act.png"/>
            <div class="menu ub">
                <div class="play ub-f1">
                    演示
                </div><div class="line lineone"></div>
                <div class="source ub-f1">
                    源码
                </div><div class="line linetwo"></div>
                <div class="return ub-f1">
                    返回
                </div>
                <div class="triangle-blue"></div>
            </div>
        </div>
        <div id="listview"  class="ubt bc-border sc-bg"></div>
    </body>

    <script src="../../../js/jquery.1.7.2.min.js"></script>
    <script src="../../../js/jquery.event.ue.js.js"></script>
    <script src="../../../js/jquery.udraggable.js"></script>
    <script>
        var jq = $.noConflict();
    </script>
    <script src="../../../js/appcan.js"></script>
    <script src="../../../js/appcan.control.js"></script>
    <script src="../../../js/appcan.listview.js"></script>
    <script src="../../../js/my.js"></script>
    </body>
    <script>
        appcan.ready(function() {
            appcan.locStorage.remove("index");
        });

        var lv = appcan.listview({
            selector : "#listview",
            type : "thinLine",
            hasIcon : false,
            hasAngle : true,
            hasSubTitle : true,
            multiLine : 1,
        });
        lv.set([{
            title : "create",
            subTitle : "创建文件",
            id : "1"
        },{
            title : "mkdir",
            subTitle : "创建文件夹",
            id : "2"
        }, {
            title : "open",
            subTitle : "打开文件",
            id : "3"
        },
         {
            title : "writeFile",
            subTitle : "写文件",
            id : "4"
        }, {
            title : "readFile",
            subTitle : "读文件",
            id : "5"
        }, {
            title : "isFileExistByPath",
            subTitle : "根据路径判断文件是否存在",
            id : "6"
        }, {
            title : "isFileExistByID",
            subTitle : "根据id判断文件是否存在",
            id : "7"
        }, {
            title : "deleteFileByPath",
            subTitle : "删除文件（根据路径）",
            id : "8"
        }, {
            title : "deleteFileById",
            subTitle : "删除文件（根据文件id）",
            id : "9"
        }, {
            title : "getFileTypeByPath",
            subTitle : "根据路径判断是文件还是文件夹",
            id : "10"
        }, {
            title : "seekFile",
            subTitle : "定位到文件某一位置",
            id : "11"
        }, {
            title : "seekBeginOfFile",
            subTitle : "定位到起始位置",
            id : "12"
        }, {
            title : "seekEndOfFile",
            subTitle : "定位到结束位置",
            id : "13"
        }, {
            title : "getFileSize",
            subTitle : "获取文件长度",
            id : "14"
        }, {
            title : "getFilePath",
            subTitle : "获取文件路径",
            id : "15"
        }, {
            title : "getFileRealPath",
            subTitle : "获取文件实际路径",
            id : "16"
        }, {
            title : "explorer",
            subTitle : "启动文件浏览器",
            id : "17"
        }, {
            title : "multiExplorer",
            subTitle : "启动文件浏览器（多选）",
            id : "18"
        }, {
            title : "createWithPassword ",
            subTitle : "创建加密文件",
            id : "19"
        }, {
            title : "openWithPassword ",
            subTitle : "读取加密文件",
            id : "20"
        }, {
            title : "getFileListByPath",
            subTitle : "获取文件夹内的文件列表",
            id : "21"
        }, {
            title : "getFileSizeByPath",
            subTitle : "获取文件大小",
            id : "22"
        }, {
            title : "search",
            subTitle : "搜索文件",
            id : "23"
        }, {
            title : "copy",
            subTitle : "复制文件到文件夹",
            id : "24"
        }, {
            title : "getReaderOffset",
            subTitle : "获取文件偏移值",
            id : "25"
        }, {
            title : "readPercent",
            subTitle : "读百分比对应位置的字符",
            id : "26"
        }, {
            title : "readNext",
            subTitle : "读取下一页字符",
            id : "27"
        }, {
            title : "readPre",
            subTitle : "读取上一页字符",
            id : "28"
        }, {
            title : "getFileCreateTime",
            subTitle : "获取文件或文件夹创建时间",
            id : "29"
        }, {
            title : "renameFile",
            subTitle : "重命名文件",
            id : "30"
        }])
        lv.on("click", function(ele, obj, curEle) {
            //直接根据标题来执行同名函数
            var name = obj.title;
            eval(name + "()");
        })
        var cText = 0;
        var cJson = 1;
        var cInt = 2;
        var path = "wgt://data/test.txt";

        function create() {
            var file = uexFileMgr.create({
                path:path
            });
            if(!file){
                alert("创建失败!");
            }else{
                alert('创建成功');
            }
            
        }

        function mkdir() {
            var path = "wgt://data/test2/";
            var ret = uexFileMgr.mkdir(path);
            alert(ret);
        }
        function open(){
            var param={
                path:path,
                mode:3
            };
            var ret=uexFileMgr.open(param);
            alert(ret);
        }

        function writeFile() {
            var file=uexFileMgr.open({
                path:path,
                mode:1
            });
            uexFileMgr.writeFile(file, 0, "testtesttesttesttesttesttesttesttest",function(ret){
                alert(ret);
            });
            uexFileMgr.closeFile(file);
        }

        function readFile() {
            var file = uexFileMgr.open({
                path: path,
                mode: 1
            });
            uexFileMgr.readFile(file, -1,0,function(isSuccess,data){
                if(isSuccess){
                    alert(data);
                }else{
                    alert("读取失败!");
                }
            });
        }

        function isFileExistByPath() {
            var ret = uexFileMgr.isFileExistByPath(path);
            alert(ret);
        }

        function isFileExistByID() {
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            var ret = uexFileMgr.isFileExistByID(file);
            alert(ret);
        }

        function deleteFileByPath() {
            var ret = uexFileMgr.deleteFileByPath(path);
            alert(ret);
        }

        function deleteFileById() {
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            var ret = uexFileMgr.deleteFileByID(file);
            alert(ret);
        }
        function getFileTypeByPath() {
            var ret = uexFileMgr.getFileTypeByPath(path);
            alert(ret);
        }
        function seekFile() {
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            var ret = uexFileMgr.seekFile(file, '1');
            alert(ret);
            uexFileMgr.closeFile(file);
        }

        function seekBeginOfFile() {
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            var ret = uexFileMgr.seekBeginOfFile(file);
            alert(ret);
            uexFileMgr.closeFile(file);
        }

        function seekEndOfFile() {
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            var ret = uexFileMgr.seekEndOfFile(file);
            alert(ret);
            uexFileMgr.closeFile(file);
        }
        function getFileSize() {
            var file = uexFileMgr.open({
                path: path,
                mode: 1
            });
            var size = uexFileMgr.getFileSize(file);
            alert(size);
            uexFileMgr.closeFile(file);
        }

        function getFileSizeByPath() {
            var params = {
                path:"wgt://",
                unit:"KB"
            }
            var data = JSON.stringify(params);
            uexFileMgr.getFileSizeByPath(data,function(info){
                if(info.errorCode == 0){
                    alert(info.data);
                }else{
                    alert("ERROR!");
                }
            });
        }
        function getFilePath() {
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            var path1 = uexFileMgr.getFilePath(file);
            alert(path1);
            uexFileMgr.closeFile(file);
        }

        function getFileRealPath() {
            var path1=uexFileMgr.getFileRealPath(path);
            alert(path1);
        }
        /*新加的*/
        function getReaderOffset(){
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            uexFileMgr.getReaderOffset(file);
        }
        function readPercent(){
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            uexFileMgr.readPercent(file,20,3,function(isSuccess,data){
                if(isSuccess){
                    alert(data);
                }else{
                    alert("ERROR!");
                }
            });
        }
        function readNext(){
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            uexFileMgr.readNext(file, 20,function(isSuccess,data){
                if(isSuccess){
                    alert(data);
                }else{
                    alert("ERROR!");
                }
            });
        }
        function readPre(){
            var file = uexFileMgr.open({
                path: path,
                mode: 3
            });
            uexFileMgr.readPre(file,20,function(isSuccess,data){
                if(isSuccess){
                    alert(data);
                }else{
                    alert("ERROR!");
                }
            });
        }
        function getFileCreateTime(){
            var timeStr = uexFileMgr.getFileCreateTime(path);
            alert(timeStr);
        }
        function renameFile(){
            var data = {
                oldFilePath:path,
                newFilePath:"wgt://data/test2.txt"
            }
            uexFileMgr.renameFile(JSON.stringify(data),function(obj){
                if(obj.result == 1){
                    alert("重命名成功!");
                }else{
                    alert("重命名失败!");
                }
            });
        }
        
        
        
        
        function explorer() {
            uexFileMgr.explorer("/sdcard/widgetone", function(path) {
                alert(path);
            });
        }

        function multiExplorer() {
            uexFileMgr.multiExplorer("/sdcard/widgetone", function(paths) {
                alert(paths);
            });
        }

        function createWithPassword () {
            var file = uexFileMgr.createWithPassword({
                path: path,
                password: "123456",
                mode: 3
            });
            if(!file){
                alert("创建失败!");
            }else{
                alert("创建成功!");
            }
            uexFileMgr.closeFile(file);
        }

        function openWithPassword () {
            var file = uexFileMgr.openWithPassword({
                path: path,
                password: "123456",
                mode: 3
            });
            if(!file){
                alert("打开失败!");
            }else{
                alert('打开成功');
            }
            uexFileMgr.closeFile(file);
        }

        function getFileListByPath() {
            var path = "wgt://"
            var result = uexFileMgr.getFileListByPath(path);
            alert(JSON.stringify(result));
        }

        function search() {
            var data={
                path:"wgt://data/",
                option:5,
                keywords:["test"],
                suffixes:["txt"]
                }
            
            uexFileMgr.search(JSON.stringify(data),function(obj){
                if(obj.isSuccess){
                    alert(obj.result);
                }else{
                    alert("搜索失败!");
                }
            });
            
        }
        function copy() {
            uexFileMgr.copy({
                src: path,
                target: "wgt://data/test2/" 
            },function(ret){
                if(ret){
                    alert("复制成功");
                }else{
                    alert("复制失败");
                }
            });
        }
    </script>
</html>
